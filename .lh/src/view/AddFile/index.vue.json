{
    "sourceFile": "src/view/AddFile/index.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 53,
            "patches": [
                {
                    "date": 1647174806852,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1647175033600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,71 +23,38 @@\n     </div>\r\n   </div>\r\n </template>\r\n \r\n-<script>\r\n-import { mapState } from 'vuex';\r\n-export default {\r\n-  components: {\r\n-    // mavonEditor,//mavon-editor组件\r\n-  },\r\n-  data() {\r\n-    return {\r\n-      html: '',    // 转成的html\r\n-      markdown: '', // 输入的markdown\r\n-      title: '',//文章名\r\n-      categoryId: '',\r\n+<script setup lang=\"ts\">\r\n+import { ref } from 'vue';\r\n+const html = ref('')\r\n+const markdown = ref('')\r\n+const title = ref('')\r\n+const categoryId = ref('')\r\n+\r\n+//实时获取转成html的数据\r\n+const change = (value, render) => {\r\n+  html.value = render\r\n+}\r\n+// 将图片上传到服务器，返回地址替换到md中 \r\n+$imgAdd(pos, $file) {\r\n+  let formdata = new FormData();\r\n+  formdata.append('image', $file);\r\n+  this.$ajax({\r\n+    url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n+    method: 'post',\r\n+    data: formdata,\r\n+  }).then((data) => {\r\n+    //将返回的url替换到文本原位置\r\n+    if (data.data.success == 1) {\r\n+      this.$refs.md.$img2Url(pos, data.data.url);\r\n+      console.log(data.data.url)\r\n     }\r\n-  },\r\n-  methods: {\r\n-    change(value, render) {\r\n-      //实时获取转成html的数据\r\n-      this.html = render\r\n-    },\r\n-    // 将图片上传到服务器，返回地址替换到md中 \r\n-    $imgAdd(pos, $file) {\r\n-      let formdata = new FormData();\r\n-      formdata.append('image', $file);\r\n-      this.$ajax({\r\n-        url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n-        method: 'post',\r\n-        data: formdata,\r\n-      }).then((data) => {\r\n-        //将返回的url替换到文本原位置\r\n-        if (data.data.success == 1) {\r\n-          this.$refs.md.$img2Url(pos, data.data.url);\r\n-          console.log(data.data.url)\r\n-        }\r\n \r\n-      })\r\n-    },\r\n-    // 添加文章\r\n-    async add() {\r\n-      let { markdown, title, categoryId } = this\r\n-      let data = { markdown, title, categoryId }\r\n-      const result = await this.$store.dispatch('AddArticle', data)\r\n-      if (result == 200) {\r\n-        this.$message({\r\n-          type: 'success',\r\n-          message: '添加成功!'\r\n-        });\r\n-      } else {\r\n-        this.$message({\r\n-          type: 'info',\r\n-          message: '添加失败'\r\n-        });\r\n-      }\r\n-    }\r\n-  },\r\n-  computed: {\r\n-    ...mapState({\r\n-      category: state => state.Article.category\r\n-    })\r\n-  },\r\n-  created() {\r\n-    this.$store.dispatch('getCategory')\r\n-  }\r\n-}\r\n+  })\r\n+},\r\n+\r\n+\r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n #add-file-container {\r\n@@ -111,8 +78,6 @@\n       border-radius: 5px;\r\n       line-height: 40px;\r\n     }\r\n   }\r\n-  .box {\r\n-  }\r\n }\r\n </style>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1647175124637,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,24 +35,24 @@\n const change = (value, render) => {\r\n   html.value = render\r\n }\r\n // 将图片上传到服务器，返回地址替换到md中 \r\n-$imgAdd(pos, $file) {\r\n+const $imgAdd = (pos, $file) => {\r\n   let formdata = new FormData();\r\n   formdata.append('image', $file);\r\n-  this.$ajax({\r\n+  $ajax({\r\n     url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n     method: 'post',\r\n     data: formdata,\r\n   }).then((data) => {\r\n     //将返回的url替换到文本原位置\r\n     if (data.data.success == 1) {\r\n-      this.$refs.md.$img2Url(pos, data.data.url);\r\n+      $refs.md.$img2Url(pos, data.data.url);\r\n       console.log(data.data.url)\r\n     }\r\n \r\n   })\r\n-},\r\n+}\r\n \r\n \r\n </script>\r\n \r\n"
                },
                {
                    "date": 1647175249446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,9 @@\n     data: formdata,\r\n   }).then((data) => {\r\n     //将返回的url替换到文本原位置\r\n     if (data.data.success == 1) {\r\n+      \r\n       $refs.md.$img2Url(pos, data.data.url);\r\n       console.log(data.data.url)\r\n     }\r\n \r\n"
                },
                {
                    "date": 1647175263749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,10 +45,10 @@\n     data: formdata,\r\n   }).then((data) => {\r\n     //将返回的url替换到文本原位置\r\n     if (data.data.success == 1) {\r\n-      \r\n-      $refs.md.$img2Url(pos, data.data.url);\r\n+      let md = ref('')\r\n+      md.$img2Url(pos, data.data.url);\r\n       console.log(data.data.url)\r\n     }\r\n \r\n   })\r\n"
                },
                {
                    "date": 1647175356580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,26 +34,43 @@\n //实时获取转成html的数据\r\n const change = (value, render) => {\r\n   html.value = render\r\n }\r\n+    // 添加文章\r\n+    async add() {\r\n+      let { markdown, title, categoryId } = this\r\n+      let data = { markdown, title, categoryId }\r\n+      const result = await this.$store.dispatch('AddArticle', data)\r\n+      if (result == 200) {\r\n+        this.$message({\r\n+          type: 'success',\r\n+          message: '添加成功!'\r\n+        });\r\n+      } else {\r\n+        this.$message({\r\n+          type: 'info',\r\n+          message: '添加失败'\r\n+        });\r\n+      }\r\n+    }\r\n // 将图片上传到服务器，返回地址替换到md中 \r\n-const $imgAdd = (pos, $file) => {\r\n-  let formdata = new FormData();\r\n-  formdata.append('image', $file);\r\n-  $ajax({\r\n-    url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n-    method: 'post',\r\n-    data: formdata,\r\n-  }).then((data) => {\r\n-    //将返回的url替换到文本原位置\r\n-    if (data.data.success == 1) {\r\n-      let md = ref('')\r\n-      md.$img2Url(pos, data.data.url);\r\n-      console.log(data.data.url)\r\n-    }\r\n+// const $imgAdd = (pos, $file) => {\r\n+//   let formdata = new FormData();\r\n+//   formdata.append('image', $file);\r\n+//   $ajax({\r\n+//     url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n+//     method: 'post',\r\n+//     data: formdata,\r\n+//   }).then((data) => {\r\n+//     //将返回的url替换到文本原位置\r\n+//     if (data.data.success == 1) {\r\n+//       let md = ref(null)\r\n+//       md.$img2Url(pos, data.data.url);\r\n+//       console.log(data.data.url)\r\n+//     }\r\n \r\n-  })\r\n-}\r\n+//   })\r\n+// }\r\n \r\n \r\n </script>\r\n \r\n"
                },
                {
                    "date": 1647175383731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,10 +35,9 @@\n const change = (value, render) => {\r\n   html.value = render\r\n }\r\n     // 添加文章\r\n-    async add() {\r\n-      let { markdown, title, categoryId } = this\r\n+  const add = async()=> {\r\n       let data = { markdown, title, categoryId }\r\n       const result = await this.$store.dispatch('AddArticle', data)\r\n       if (result == 200) {\r\n         this.$message({\r\n"
                },
                {
                    "date": 1647175398466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,20 +37,9 @@\n }\r\n     // 添加文章\r\n   const add = async()=> {\r\n       let data = { markdown, title, categoryId }\r\n-      const result = await this.$store.dispatch('AddArticle', data)\r\n-      if (result == 200) {\r\n-        this.$message({\r\n-          type: 'success',\r\n-          message: '添加成功!'\r\n-        });\r\n-      } else {\r\n-        this.$message({\r\n-          type: 'info',\r\n-          message: '添加失败'\r\n-        });\r\n-      }\r\n+      \r\n     }\r\n // 将图片上传到服务器，返回地址替换到md中 \r\n // const $imgAdd = (pos, $file) => {\r\n //   let formdata = new FormData();\r\n"
                },
                {
                    "date": 1647175447784,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,31 +34,31 @@\n //实时获取转成html的数据\r\n const change = (value, render) => {\r\n   html.value = render\r\n }\r\n-    // 添加文章\r\n-  const add = async()=> {\r\n-      let data = { markdown, title, categoryId }\r\n-      \r\n-    }\r\n+// 添加文章\r\n+const add = async () => {\r\n+  let data = { markdown, title, categoryId }\r\n+\r\n+}\r\n // 将图片上传到服务器，返回地址替换到md中 \r\n-// const $imgAdd = (pos, $file) => {\r\n-//   let formdata = new FormData();\r\n-//   formdata.append('image', $file);\r\n-//   $ajax({\r\n-//     url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n-//     method: 'post',\r\n-//     data: formdata,\r\n-//   }).then((data) => {\r\n-//     //将返回的url替换到文本原位置\r\n-//     if (data.data.success == 1) {\r\n-//       let md = ref(null)\r\n-//       md.$img2Url(pos, data.data.url);\r\n-//       console.log(data.data.url)\r\n-//     }\r\n+const $imgAdd = (pos, $file) => {\r\n+  //   let formdata = new FormData();\r\n+  //   formdata.append('image', $file);\r\n+  //   $ajax({\r\n+  //     url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n+  //     method: 'post',\r\n+  //     data: formdata,\r\n+  //   }).then((data) => {\r\n+  //     //将返回的url替换到文本原位置\r\n+  //     if (data.data.success == 1) {\r\n+  //       let md = ref(null)\r\n+  //       md.$img2Url(pos, data.data.url);\r\n+  //       console.log(data.data.url)\r\n+  //     }\r\n \r\n-//   })\r\n-// }\r\n+  //   })\r\n+}\r\n \r\n \r\n </script>\r\n \r\n"
                },
                {
                    "date": 1647176615949,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,10 @@\n   </div>\r\n </template>\r\n \r\n <script setup lang=\"ts\">\r\n-import { ref } from 'vue';\r\n+import { onMounted, ref } from 'vue';\r\n+import { useCategory } from '../../store';\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n@@ -57,10 +58,13 @@\n   //     }\r\n \r\n   //   })\r\n }\r\n+onMounted(() => {\r\n+  const categorySotre = useCategory()\r\n \r\n \r\n+})\r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n #add-file-container {\r\n"
                },
                {
                    "date": 1647176762529,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,11 +60,12 @@\n   //   })\r\n }\r\n onMounted(() => {\r\n   const categorySotre = useCategory()\r\n+  categorySotre.getCategoryList()\r\n \r\n-\r\n })\r\n+const category = categorySotre.categoryList\r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n #add-file-container {\r\n"
                },
                {
                    "date": 1647176785264,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,14 +58,14 @@\n   //     }\r\n \r\n   //   })\r\n }\r\n-onMounted(() => {\r\n-  const categorySotre = useCategory()\r\n-  categorySotre.getCategoryList()\r\n \r\n-})\r\n+const categorySotre = useCategory()\r\n+categorySotre.getCategoryList()\r\n+\r\n const category = categorySotre.categoryList\r\n+\r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n #add-file-container {\r\n"
                },
                {
                    "date": 1647177981523,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n \r\n <script setup lang=\"ts\">\r\n import { onMounted, ref } from 'vue';\r\n import { useCategory } from '../../store';\r\n+import { mavonEditor } from 'mavon-editor'\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n@@ -61,9 +62,8 @@\n }\r\n \r\n const categorySotre = useCategory()\r\n categorySotre.getCategoryList()\r\n-\r\n const category = categorySotre.categoryList\r\n \r\n </script>\r\n \r\n"
                },
                {
                    "date": 1647178006109,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n \r\n <script setup lang=\"ts\">\r\n import { onMounted, ref } from 'vue';\r\n import { useCategory } from '../../store';\r\n-import { mavonEditor } from 'mavon-editor'\r\n+import mavonEditor from 'mavon-editor'\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n"
                },
                {
                    "date": 1647178678082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,8 +27,9 @@\n <script setup lang=\"ts\">\r\n import { onMounted, ref } from 'vue';\r\n import { useCategory } from '../../store';\r\n import mavonEditor from 'mavon-editor'\r\n+import 'mavon-editor/dist/css/index.css'\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n"
                },
                {
                    "date": 1647178719026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,10 +26,9 @@\n \r\n <script setup lang=\"ts\">\r\n import { onMounted, ref } from 'vue';\r\n import { useCategory } from '../../store';\r\n-import mavonEditor from 'mavon-editor'\r\n-import 'mavon-editor/dist/css/index.css'\r\n+\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n"
                },
                {
                    "date": 1647178898456,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,15 +12,16 @@\n       <el-input v-model=\"title\" placeholder=\"请输入标题\"></el-input>\r\n       <Button type=\"button\" class=\"btn\" @click=\"add\">提交</Button>\r\n     </div>\r\n     <div class=\"box\">\r\n-      <mavon-editor\r\n+      <!-- <mavon-editor\r\n         v-model=\"markdown\"\r\n         ref=\"md\"\r\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n-      />\r\n+      />-->\r\n+      <v-md-editor v-model=\"text\" height=\"400px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647178905553,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor v-model=\"text\" height=\"400px\"></v-md-editor>\r\n+      <v-md-editor v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647179045020,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,9 +69,9 @@\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n #add-file-container {\r\n-  width: 70%;\r\n+  width: 100%;\r\n   height: 100%;\r\n   margin: 0 auto;\r\n   background-color: white;\r\n   .file-name {\r\n"
                },
                {
                    "date": 1647179262258,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n+      <v-md-editor fontSize v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647179268249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20px\" v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647179289458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20px\" v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647179312745,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"400px\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647179322885,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"100%\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647179469265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,11 @@\n const categoryId = ref('')\r\n \r\n //实时获取转成html的数据\r\n const change = (value, render) => {\r\n+\r\n   html.value = render\r\n+  console.log(render);\r\n }\r\n // 添加文章\r\n const add = async () => {\r\n   let data = { markdown, title, categoryId }\r\n"
                },
                {
                    "date": 1647179540202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n           :value=\"item.id\"\r\n         ></el-option>\r\n       </el-select>\r\n       <el-input v-model=\"title\" placeholder=\"请输入标题\"></el-input>\r\n-      <Button type=\"button\" class=\"btn\" @click=\"add\">提交</Button>\r\n+      <button type=\"button\" class=\"btn\" @click=\"add\">提交</button>\r\n     </div>\r\n     <div class=\"box\">\r\n       <!-- <mavon-editor\r\n         v-model=\"markdown\"\r\n"
                },
                {
                    "date": 1647179558098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,8 @@\n \r\n <script setup lang=\"ts\">\r\n import { onMounted, ref } from 'vue';\r\n import { useCategory } from '../../store';\r\n-\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n"
                },
                {
                    "date": 1647179622203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,38 +32,14 @@\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n \r\n-//实时获取转成html的数据\r\n-const change = (value, render) => {\r\n-\r\n-  html.value = render\r\n-  console.log(render);\r\n-}\r\n // 添加文章\r\n const add = async () => {\r\n   let data = { markdown, title, categoryId }\r\n \r\n }\r\n-// 将图片上传到服务器，返回地址替换到md中 \r\n-const $imgAdd = (pos, $file) => {\r\n-  //   let formdata = new FormData();\r\n-  //   formdata.append('image', $file);\r\n-  //   $ajax({\r\n-  //     url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n-  //     method: 'post',\r\n-  //     data: formdata,\r\n-  //   }).then((data) => {\r\n-  //     //将返回的url替换到文本原位置\r\n-  //     if (data.data.success == 1) {\r\n-  //       let md = ref(null)\r\n-  //       md.$img2Url(pos, data.data.url);\r\n-  //       console.log(data.data.url)\r\n-  //     }\r\n \r\n-  //   })\r\n-}\r\n-\r\n const categorySotre = useCategory()\r\n categorySotre.getCategoryList()\r\n const category = categorySotre.categoryList\r\n \r\n"
                },
                {
                    "date": 1647179637510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"100%\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"900px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647179704288,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"900px\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" class=\"md\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n@@ -45,8 +45,11 @@\n \r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n+.md {\r\n+  height: 100%;\r\n+}\r\n #add-file-container {\r\n   width: 100%;\r\n   height: 100%;\r\n   margin: 0 auto;\r\n"
                },
                {
                    "date": 1647179835685,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,11 +45,8 @@\n \r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n-.md {\r\n-  height: 100%;\r\n-}\r\n #add-file-container {\r\n   width: 100%;\r\n   height: 100%;\r\n   margin: 0 auto;\r\n"
                },
                {
                    "date": 1647179920137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,8 +59,9 @@\n     justify-content: space-between;\r\n     background-color: #ccc;\r\n     line-height: 60px;\r\n     margin-bottom: 10px;\r\n+    align-items: center;\r\n     .btn {\r\n       margin: 10px;\r\n       width: 156px;\r\n       height: 40px;\r\n"
                },
                {
                    "date": 1647179955259,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" class=\"md\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647180208984,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\" right-toolbar></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647180220666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\" right-toolbar></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\" right-toolbar=\"sync-scroll\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647180255837,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,9 @@\n         @change=\"change\"\r\n         @imgAdd=\"$imgAdd\"\r\n         style=\"min-height: 800px\"\r\n       />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\" right-toolbar=\"sync-scroll\"></v-md-editor>\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\"></v-md-editor>\r\n     </div>\r\n   </div>\r\n </template>\r\n \r\n"
                },
                {
                    "date": 1647251613980,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,74 @@\n+<template>\r\n+  <div id=\"add-file-container\">\r\n+    <div class=\"file-name\">\r\n+      <el-select v-model=\"categoryId\" placeholder=\"请选择文章分类\">\r\n+        <el-option\r\n+          v-for=\"item in category\"\r\n+          :key=\"item.id\"\r\n+          :label=\"item.categoryName\"\r\n+          :value=\"item.id\"\r\n+        ></el-option>\r\n+      </el-select>\r\n+      <el-input v-model=\"title\" placeholder=\"请输入标题\"></el-input>\r\n+      <button type=\"button\" class=\"btn\" @click=\"add\">提交</button>\r\n+    </div>\r\n+    <div class=\"box\">\r\n+      <!-- <mavon-editor\r\n+        v-model=\"markdown\"\r\n+        ref=\"md\"\r\n+        @change=\"change\"\r\n+        @imgAdd=\"$imgAdd\"\r\n+        style=\"min-height: 800px\"\r\n+      />-->\r\n+      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\"></v-md-editor>\r\n+    </div>\r\n+  </div>\r\n+</template>\r\n+\r\n+<script setup lang=\"ts\">\r\n+import { onMounted, ref } from 'vue';\r\n+import { useCategory } from '../../store';\r\n+const html = ref('')\r\n+const markdown = ref('')\r\n+const title = ref('')\r\n+const categoryId = ref('')\r\n+\r\n+// 添加文章\r\n+const add = async () => {\r\n+  let data = { markdown, title, categoryId }\r\n+  console.log(data);\r\n+\r\n+}\r\n+\r\n+const categorySotre = useCategory()\r\n+categorySotre.getCategoryList()\r\n+const category = categorySotre.categoryList\r\n+\r\n+</script>\r\n+\r\n+<style scoped lang=\"less\">\r\n+#add-file-container {\r\n+  width: 100%;\r\n+  height: 100%;\r\n+  margin: 0 auto;\r\n+  background-color: white;\r\n+  .file-name {\r\n+    width: 100%;\r\n+    height: 60px;\r\n+    display: flex;\r\n+    flex-direction: row;\r\n+    justify-content: space-between;\r\n+    background-color: #ccc;\r\n+    line-height: 60px;\r\n+    margin-bottom: 10px;\r\n+    align-items: center;\r\n+    .btn {\r\n+      margin: 10px;\r\n+      width: 156px;\r\n+      height: 40px;\r\n+      border-radius: 5px;\r\n+      line-height: 40px;\r\n+    }\r\n+  }\r\n+}\r\n+</style>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1647251854072,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,9 @@\n \r\n const categorySotre = useCategory()\r\n categorySotre.getCategoryList()\r\n const category = categorySotre.categoryList\r\n+console.log(category);\r\n \r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n@@ -70,78 +71,5 @@\n       line-height: 40px;\r\n     }\r\n   }\r\n }\r\n-</style>\n-<template>\r\n-  <div id=\"add-file-container\">\r\n-    <div class=\"file-name\">\r\n-      <el-select v-model=\"categoryId\" placeholder=\"请选择文章分类\">\r\n-        <el-option\r\n-          v-for=\"item in category\"\r\n-          :key=\"item.id\"\r\n-          :label=\"item.categoryName\"\r\n-          :value=\"item.id\"\r\n-        ></el-option>\r\n-      </el-select>\r\n-      <el-input v-model=\"title\" placeholder=\"请输入标题\"></el-input>\r\n-      <button type=\"button\" class=\"btn\" @click=\"add\">提交</button>\r\n-    </div>\r\n-    <div class=\"box\">\r\n-      <!-- <mavon-editor\r\n-        v-model=\"markdown\"\r\n-        ref=\"md\"\r\n-        @change=\"change\"\r\n-        @imgAdd=\"$imgAdd\"\r\n-        style=\"min-height: 800px\"\r\n-      />-->\r\n-      <v-md-editor fontSize=\"20\" v-model=\"markdown\" height=\"800px\"></v-md-editor>\r\n-    </div>\r\n-  </div>\r\n-</template>\r\n-\r\n-<script setup lang=\"ts\">\r\n-import { onMounted, ref } from 'vue';\r\n-import { useCategory } from '../../store';\r\n-const html = ref('')\r\n-const markdown = ref('')\r\n-const title = ref('')\r\n-const categoryId = ref('')\r\n-\r\n-// 添加文章\r\n-const add = async () => {\r\n-  let data = { markdown, title, categoryId }\r\n-\r\n-}\r\n-\r\n-const categorySotre = useCategory()\r\n-categorySotre.getCategoryList()\r\n-const category = categorySotre.categoryList\r\n-\r\n-</script>\r\n-\r\n-<style scoped lang=\"less\">\r\n-#add-file-container {\r\n-  width: 100%;\r\n-  height: 100%;\r\n-  margin: 0 auto;\r\n-  background-color: white;\r\n-  .file-name {\r\n-    width: 100%;\r\n-    height: 60px;\r\n-    display: flex;\r\n-    flex-direction: row;\r\n-    justify-content: space-between;\r\n-    background-color: #ccc;\r\n-    line-height: 60px;\r\n-    margin-bottom: 10px;\r\n-    align-items: center;\r\n-    .btn {\r\n-      margin: 10px;\r\n-      width: 156px;\r\n-      height: 40px;\r\n-      border-radius: 5px;\r\n-      line-height: 40px;\r\n-    }\r\n-  }\r\n-}\r\n </style>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1647252242405,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,19 +26,18 @@\n </template>\r\n \r\n <script setup lang=\"ts\">\r\n import { onMounted, ref } from 'vue';\r\n-import { useCategory } from '../../store';\r\n+import { useCategory, useArticle } from '../../store';\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n const categoryId = ref('')\r\n \r\n // 添加文章\r\n const add = async () => {\r\n   let data = { markdown, title, categoryId }\r\n-  console.log(data);\r\n-\r\n+  useArticle().addArticle(data)\r\n }\r\n \r\n const categorySotre = useCategory()\r\n categorySotre.getCategoryList()\r\n"
                },
                {
                    "date": 1647252275800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n </template>\r\n \r\n <script setup lang=\"ts\">\r\n import { onMounted, ref } from 'vue';\r\n+import router from '../../route';\r\n import { useCategory, useArticle } from '../../store';\r\n const html = ref('')\r\n const markdown = ref('')\r\n const title = ref('')\r\n@@ -36,8 +37,9 @@\n // 添加文章\r\n const add = async () => {\r\n   let data = { markdown, title, categoryId }\r\n   useArticle().addArticle(data)\r\n+  router.push({ name: 'article' })\r\n }\r\n \r\n const categorySotre = useCategory()\r\n categorySotre.getCategoryList()\r\n"
                },
                {
                    "date": 1647252624898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n const categoryId = ref('')\r\n \r\n // 添加文章\r\n const add = async () => {\r\n-  let data = { markdown, title, categoryId }\r\n+  let data = { markdown: markdown.value, title: title.value, categoryId: categoryId.value }\r\n   useArticle().addArticle(data)\r\n   router.push({ name: 'article' })\r\n }\r\n \r\n"
                },
                {
                    "date": 1647252776225,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n   </div>\r\n </template>\r\n \r\n <script setup lang=\"ts\">\r\n-import { onMounted, ref } from 'vue';\r\n+import { onBeforeMount, onMounted, ref } from 'vue';\r\n import router from '../../route';\r\n import { useCategory, useArticle } from '../../store';\r\n const html = ref('')\r\n const markdown = ref('')\r\n@@ -40,12 +40,14 @@\n   useArticle().addArticle(data)\r\n   router.push({ name: 'article' })\r\n }\r\n \r\n-const categorySotre = useCategory()\r\n-categorySotre.getCategoryList()\r\n-const category = categorySotre.categoryList\r\n-console.log(category);\r\n+onBeforeMount(() => {\r\n+  const categorySotre = useCategory()\r\n+  categorySotre.getCategoryList()\r\n+  const category = categorySotre.categoryList\r\n+  console.log(category);\r\n+})\r\n \r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n"
                },
                {
                    "date": 1647253169484,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,10 +40,11 @@\n   useArticle().addArticle(data)\r\n   router.push({ name: 'article' })\r\n }\r\n \r\n+const categorySotre = useCategory()\r\n+\r\n onBeforeMount(() => {\r\n-  const categorySotre = useCategory()\r\n   categorySotre.getCategoryList()\r\n   const category = categorySotre.categoryList\r\n   console.log(category);\r\n })\r\n"
                },
                {
                    "date": 1647253251750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n }\r\n \r\n const categorySotre = useCategory()\r\n \r\n-onBeforeMount(() => {\r\n+onMounted(() => {\r\n   categorySotre.getCategoryList()\r\n   const category = categorySotre.categoryList\r\n   console.log(category);\r\n })\r\n"
                },
                {
                    "date": 1647253314855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n }\r\n \r\n const categorySotre = useCategory()\r\n \r\n-onMounted(() => {\r\n+onBeforeMount(() => {\r\n   categorySotre.getCategoryList()\r\n   const category = categorySotre.categoryList\r\n   console.log(category);\r\n })\r\n"
                },
                {
                    "date": 1647253372934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,8 +45,9 @@\n \r\n onBeforeMount(() => {\r\n   categorySotre.getCategoryList()\r\n   const category = categorySotre.categoryList\r\n+  return category\r\n   console.log(category);\r\n })\r\n \r\n </script>\r\n"
                },
                {
                    "date": 1647253380096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,8 @@\n \r\n onBeforeMount(() => {\r\n   categorySotre.getCategoryList()\r\n   const category = categorySotre.categoryList\r\n-  return category\r\n   console.log(category);\r\n })\r\n \r\n </script>\r\n"
                },
                {
                    "date": 1647253559804,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,11 +44,11 @@\n const categorySotre = useCategory()\r\n \r\n onBeforeMount(() => {\r\n   categorySotre.getCategoryList()\r\n-  const category = categorySotre.categoryList\r\n   console.log(category);\r\n })\r\n+const category = categorySotre.categoryList\r\n \r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n"
                },
                {
                    "date": 1647253575709,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,11 +44,13 @@\n const categorySotre = useCategory()\r\n \r\n onBeforeMount(() => {\r\n   categorySotre.getCategoryList()\r\n-  console.log(category);\r\n+  console.log('1');\r\n+\r\n })\r\n const category = categorySotre.categoryList\r\n+console.log(category);\r\n \r\n </script>\r\n \r\n <style scoped lang=\"less\">\r\n"
                },
                {
                    "date": 1647253608117,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n   categorySotre.getCategoryList()\r\n   console.log('1');\r\n \r\n })\r\n-const category = categorySotre.categoryList\r\n+// const category = categorySotre.categoryList\r\n console.log(category);\r\n \r\n </script>\r\n \r\n"
                },
                {
                    "date": 1647253627388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,9 +47,9 @@\n   categorySotre.getCategoryList()\r\n   console.log('1');\r\n \r\n })\r\n-// const category = categorySotre.categoryList\r\n+const category = categorySotre.categoryList\r\n console.log(category);\r\n \r\n </script>\r\n \r\n"
                },
                {
                    "date": 1647253647859,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,9 +45,8 @@\n \r\n onBeforeMount(() => {\r\n   categorySotre.getCategoryList()\r\n   console.log('1');\r\n-\r\n })\r\n const category = categorySotre.categoryList\r\n console.log(category);\r\n \r\n"
                },
                {
                    "date": 1647253735286,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,9 @@\n }\r\n \r\n \r\n onBeforeMount(() => {\r\n+  \r\n })\r\n const getArticleData = () => {\r\n   const categorySotre = useCategory()\r\n   categorySotre.getCategoryList()\r\n"
                },
                {
                    "date": 1647256248869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n   return categorySotre.categoryList\r\n })\r\n const router = useRouter()\r\n const route = useRoute()\r\n-console.log();\r\n+console.log(r);\r\n \r\n \r\n \r\n // 添加文章\r\n"
                }
            ],
            "date": 1647174806852,
            "name": "Commit-0",
            "content": "<template>\r\n  <div id=\"add-file-container\">\r\n    <div class=\"file-name\">\r\n      <el-select v-model=\"categoryId\" placeholder=\"请选择文章分类\">\r\n        <el-option\r\n          v-for=\"item in category\"\r\n          :key=\"item.id\"\r\n          :label=\"item.categoryName\"\r\n          :value=\"item.id\"\r\n        ></el-option>\r\n      </el-select>\r\n      <el-input v-model=\"title\" placeholder=\"请输入标题\"></el-input>\r\n      <Button type=\"button\" class=\"btn\" @click=\"add\">提交</Button>\r\n    </div>\r\n    <div class=\"box\">\r\n      <mavon-editor\r\n        v-model=\"markdown\"\r\n        ref=\"md\"\r\n        @change=\"change\"\r\n        @imgAdd=\"$imgAdd\"\r\n        style=\"min-height: 800px\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nexport default {\r\n  components: {\r\n    // mavonEditor,//mavon-editor组件\r\n  },\r\n  data() {\r\n    return {\r\n      html: '',    // 转成的html\r\n      markdown: '', // 输入的markdown\r\n      title: '',//文章名\r\n      categoryId: '',\r\n    }\r\n  },\r\n  methods: {\r\n    change(value, render) {\r\n      //实时获取转成html的数据\r\n      this.html = render\r\n    },\r\n    // 将图片上传到服务器，返回地址替换到md中 \r\n    $imgAdd(pos, $file) {\r\n      let formdata = new FormData();\r\n      formdata.append('image', $file);\r\n      this.$ajax({\r\n        url: 'http://local.basic.com/index.php?r=markdown/upload',\r\n        method: 'post',\r\n        data: formdata,\r\n      }).then((data) => {\r\n        //将返回的url替换到文本原位置\r\n        if (data.data.success == 1) {\r\n          this.$refs.md.$img2Url(pos, data.data.url);\r\n          console.log(data.data.url)\r\n        }\r\n\r\n      })\r\n    },\r\n    // 添加文章\r\n    async add() {\r\n      let { markdown, title, categoryId } = this\r\n      let data = { markdown, title, categoryId }\r\n      const result = await this.$store.dispatch('AddArticle', data)\r\n      if (result == 200) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '添加成功!'\r\n        });\r\n      } else {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '添加失败'\r\n        });\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      category: state => state.Article.category\r\n    })\r\n  },\r\n  created() {\r\n    this.$store.dispatch('getCategory')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n#add-file-container {\r\n  width: 70%;\r\n  height: 100%;\r\n  margin: 0 auto;\r\n  background-color: white;\r\n  .file-name {\r\n    width: 100%;\r\n    height: 60px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    background-color: #ccc;\r\n    line-height: 60px;\r\n    margin-bottom: 10px;\r\n    .btn {\r\n      margin: 10px;\r\n      width: 156px;\r\n      height: 40px;\r\n      border-radius: 5px;\r\n      line-height: 40px;\r\n    }\r\n  }\r\n  .box {\r\n  }\r\n}\r\n</style>"
        }
    ]
}